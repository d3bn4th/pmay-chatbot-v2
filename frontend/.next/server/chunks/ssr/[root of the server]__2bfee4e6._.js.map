{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/sanju/Code/pmay-chatbot/frontend/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///Users/sanju/Code/pmay-chatbot/frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///Users/sanju/Code/pmay-chatbot/frontend/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        \"relative flex size-8 shrink-0 overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn(\"aspect-square size-full\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,8OAAC,kKAAA,CAAA,OAAoB;QACnB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,kKAAA,CAAA,QAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,8OAAC,kKAAA,CAAA,WAAwB;QACvB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,oEACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///Users/sanju/Code/pmay-chatbot/frontend/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///Users/sanju/Code/pmay-chatbot/frontend/components/source-documents.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { ChevronDown, ChevronUp, FileText } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\n\nexport interface SourceDocument {\n  text: string\n  score: number\n  metadata: {\n    source?: string\n    title?: string\n    author?: string\n    date?: string\n    page?: number\n  }\n}\n\ninterface SourceDocumentsProps {\n  documents: SourceDocument[]\n}\n\nexport function SourceDocuments({ documents }: SourceDocumentsProps) {\n  const [isExpanded, setIsExpanded] = useState(false)\n\n  if (!documents || documents.length === 0) {\n    return null\n  }\n\n  return (\n    <div className=\"mt-2 text-xs\">\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        className=\"flex items-center text-blue-600 hover:text-blue-800 p-0 h-auto\"\n        onClick={() => setIsExpanded(!isExpanded)}\n      >\n        {isExpanded ? <ChevronUp className=\"h-3 w-3 mr-1\" /> : <ChevronDown className=\"h-3 w-3 mr-1\" />}\n        <span>\n          {isExpanded ? \"Hide\" : \"Show\"} {documents.length} source{documents.length > 1 ? \"s\" : \"\"}\n        </span>\n      </Button>\n\n      {isExpanded && (\n        <div className=\"mt-2 space-y-2 border-t border-gray-100 pt-2\">\n          {documents.map((doc, index) => (\n            <div key={index} className=\"bg-gray-50 p-2 rounded border border-gray-200\">\n              <div className=\"flex items-center text-gray-600 mb-1\">\n                <FileText className=\"h-3 w-3 mr-1\" />\n                <span className=\"font-medium\">{doc.metadata?.source || \"Document\"}</span>\n                <span className=\"ml-auto text-gray-400\">Relevance: {(doc.score * 100).toFixed(0)}%</span>\n              </div>\n              <p className=\"text-gray-700 text-xs\">{doc.text}</p>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AACA;AAJA;;;;;AAsBO,SAAS,gBAAgB,EAAE,SAAS,EAAwB;IACjE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG;QACxC,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,2HAAA,CAAA,SAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,WAAU;gBACV,SAAS,IAAM,cAAc,CAAC;;oBAE7B,2BAAa,8OAAC,gNAAA,CAAA,YAAS;wBAAC,WAAU;;;;;6CAAoB,8OAAC,oNAAA,CAAA,cAAW;wBAAC,WAAU;;;;;;kCAC9E,8OAAC;;4BACE,aAAa,SAAS;4BAAO;4BAAE,UAAU,MAAM;4BAAC;4BAAQ,UAAU,MAAM,GAAG,IAAI,MAAM;;;;;;;;;;;;;YAIzF,4BACC,8OAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC,KAAK,sBACnB,8OAAC;wBAAgB,WAAU;;0CACzB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,8MAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;wCAAK,WAAU;kDAAe,IAAI,QAAQ,EAAE,UAAU;;;;;;kDACvD,8OAAC;wCAAK,WAAU;;4CAAwB;4CAAY,CAAC,IAAI,KAAK,GAAG,GAAG,EAAE,OAAO,CAAC;4CAAG;;;;;;;;;;;;;0CAEnF,8OAAC;gCAAE,WAAU;0CAAyB,IAAI,IAAI;;;;;;;uBANtC;;;;;;;;;;;;;;;;AAatB","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///Users/sanju/Code/pmay-chatbot/frontend/hooks/use-mobile.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\n\nexport function useMobile() {\n  const [isMobile, setIsMobile] = useState(false)\n\n  useEffect(() => {\n    const checkIfMobile = () => {\n      setIsMobile(window.innerWidth < 768)\n    }\n\n    // Initial check\n    checkIfMobile()\n\n    // Add event listener\n    window.addEventListener(\"resize\", checkIfMobile)\n\n    // Clean up\n    return () => {\n      window.removeEventListener(\"resize\", checkIfMobile)\n    }\n  }, [])\n\n  return isMobile\n}\n"],"names":[],"mappings":";;;AAEA;AAFA;;AAIO,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,gBAAgB;YACpB,YAAY,OAAO,UAAU,GAAG;QAClC;QAEA,gBAAgB;QAChB;QAEA,qBAAqB;QACrB,OAAO,gBAAgB,CAAC,UAAU;QAElC,WAAW;QACX,OAAO;YACL,OAAO,mBAAmB,CAAC,UAAU;QACvC;IACF,GAAG,EAAE;IAEL,OAAO;AACT","debugId":null}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///Users/sanju/Code/pmay-chatbot/frontend/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRef, useEffect, useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\"\nimport { Input } from \"@/components/ui/input\"\nimport { Loader2, Send, Info, Home, FileText, Settings, Menu } from \"lucide-react\"\nimport Image from \"next/image\"\nimport { SourceDocument, SourceDocuments } from \"@/components/source-documents\"\nimport { useMobile } from \"@/hooks/use-mobile\"\nimport ReactMarkdown from \"react-markdown\"\nimport remarkGfm from \"remark-gfm\"\n\n// Define a custom message type that includes an 'id' and optional sources\ninterface ChatMessageType {\n  id: string;\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n  sources?: SourceDocument[];\n}\n\nexport default function ChatPage() {\n  const [messages, setMessages] = useState<ChatMessageType[]>([])\n  const [input, setInput] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<Error | null>(null)\n\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const isMobile = useMobile()\n  const [showSidebar, setShowSidebar] = useState(!isMobile)\n  const [activeSection, setActiveSection] = useState(\"home\")\n  const [userMessageCount, setUserMessageCount] = useState(0); // New state to trigger scroll\n\n  useEffect(() => {\n    setShowSidebar(!isMobile)\n  }, [isMobile])\n\n  // New useEffect for scrolling only when user sends a message\n  useEffect(() => {\n    if (userMessageCount > 0 && messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n      // console.log(\"User message sent, scrolling to end.\", messagesEndRef.current);\n    }\n  }, [userMessageCount]);\n\n  useEffect(() => {\n    if (error) {\n      // console.error(\"Chat error object:\", error) // Changed from useChat error\n    }\n  }, [error])\n\n  const showWelcomeMessage = messages.length === 0 && !isLoading && !error\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    if (!input.trim() || isLoading) return\n\n    const userMessage: ChatMessageType = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: input,\n    }\n\n    setMessages((prevMessages) => [...prevMessages, userMessage])\n    setInput('')\n    setIsLoading(true)\n    setError(null)\n    setUserMessageCount(prevCount => prevCount + 1); // Increment to trigger scroll\n\n    const newAssistantMessageId = `ai-response-${Date.now()}`\n\n    try {\n      const response = await fetch('/api/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ messages: [userMessage] }),\n      })\n\n      if (!response.ok || !response.body) {\n        const errorText = await response.text()\n        throw new Error(`API request failed with status ${response.status}: ${errorText}`)\n      }\n\n      const reader = response.body.getReader()\n      const decoder = new TextDecoder()\n      let assistantResponseContent = ''\n      let assistantSources: SourceDocument[] = [];\n\n      while (true) {\n        const { value, done } = await reader.read()\n        if (done) break\n\n        const chunk = decoder.decode(value, { stream: true })\n        // console.log('Frontend: Raw chunk received:', chunk.length, 'bytes')\n        const sseMessages = chunk.split('\\n\\n').filter(msg => msg.startsWith('data: ')).map(msg => msg.substring(6))\n\n        for (const sseMessage of sseMessages) {\n          // console.log('Frontend: Processing SSE message:', sseMessage)\n          try {\n            const parsedData = JSON.parse(sseMessage)\n            // console.log('Frontend: Parsed SSE data:', parsedData)\n            \n            if (parsedData.type === 'text') {\n              const content = parsedData.content;\n              if (content) {\n                assistantResponseContent += content;\n              }\n            } else if (parsedData.type === 'sources') {\n              if (parsedData.sources) {\n                assistantSources = parsedData.sources;\n              }\n            }\n\n            setMessages((prevMessages) => {\n              const existingAssistantMessageIndex = prevMessages.findIndex(\n                (msg) => msg.id === newAssistantMessageId\n              );\n\n              if (existingAssistantMessageIndex !== -1) {\n                // Update existing assistant message\n                return prevMessages.map((msg, index) =>\n                  index === existingAssistantMessageIndex\n                    ? { ...msg, content: assistantResponseContent, sources: assistantSources }\n                    : msg\n                );\n              } else {\n                // Add new assistant message (first chunk)\n                return [\n                  ...prevMessages,\n                  {\n                    id: newAssistantMessageId,\n                    role: 'assistant',\n                    content: assistantResponseContent,\n                    sources: assistantSources\n                  },\n                ];\n              }\n            });\n          } catch (jsonError) {\n            console.error('Failed to parse SSE message:', sseMessage, jsonError)\n          }\n        }\n      }\n    } catch (err) {\n      console.error('Error during streaming:', err)\n      setError(err instanceof Error ? err : new Error('An unknown error occurred.'))\n      setMessages((prevMessages) => [\n        ...prevMessages,\n        {\n          id: Date.now().toString(),\n          role: 'assistant',\n          content: 'I apologize, but I encountered an error while processing your request. Please try again.',\n        },\n      ])\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex flex-col h-screen bg-gray-50\">\n      {/* Sidebar */}\n      <div\n        className={`fixed top-0 left-0 h-screen z-50 ${\n          showSidebar ? \"w-64\" : \"w-0 -ml-64\"\n        } bg-blue-800 text-white transition-all duration-300 ease-in-out overflow-hidden`}\n      >\n        <div className=\"p-4 h-full flex flex-col\">\n          <div className=\"flex flex-col items-center justify-center mb-8\">\n            <div className=\"flex items-center mb-2\">\n              <div className=\"bg-white p-2 rounded-xl mr-2\">\n                <Image\n                  src=\"/mohua-logo-removebgpng.png\"\n                  alt=\"Government of India Emblem\"\n                  width={60}\n                  height={60}\n                  className=\"object-contain\"\n                />\n              </div>\n              <div className=\"bg-white p-2 rounded-xl\">\n                <Image\n                  src=\"/pmay-logo-removebg-preview.png\"\n                  alt=\"PMAY Logo\"\n                  width={80}\n                  height={80}\n                  className=\"object-contain\"\n                />\n              </div>\n            </div>\n            <h1 className=\"text-lg font-bold\">PMAY Chatbot</h1>\n          </div>\n\n          <nav className=\"space-y-1 mb-6\">\n            <Button\n              variant=\"ghost\"\n              className={`w-full justify-start text-white hover:bg-blue-700 ${\n                activeSection === \"home\" ? \"bg-blue-700\" : \"\"\n              }`}\n              onClick={() => setActiveSection(\"home\")}\n            >\n              <Home className=\"mr-2 h-5 w-5\" />\n              Home\n            </Button>\n            <Button\n              variant=\"ghost\"\n              className={`w-full justify-start text-white hover:bg-blue-700 ${\n                activeSection === \"documents\" ? \"bg-blue-700\" : \"\"\n              }`}\n              onClick={() => setActiveSection(\"documents\")}\n            >\n              <FileText className=\"mr-2 h-5 w-5\" />\n              Documents\n            </Button>\n            <Button\n              variant=\"ghost\"\n              className={`w-full justify-start text-white hover:bg-blue-700 ${\n                activeSection === \"settings\" ? \"bg-blue-700\" : \"\"\n              }`}\n              onClick={() => setActiveSection(\"settings\")}\n            >\n              <Settings className=\"mr-2 h-5 w-5\" />\n              Settings\n            </Button>\n          </nav>\n\n          {/* Dynamic Content Based on Active Section */}\n          <div className=\"flex-1 overflow-y-auto\">\n            {activeSection === \"home\" && (\n              <div className=\"space-y-4\">\n                <div className=\"text-sm text-blue-200\">\n                  <h3 className=\"font-semibold mb-2\">Quick Actions</h3>\n                  <ul className=\"space-y-1 text-xs\">\n                    <li>• Ask about PMAY eligibility</li>\n                    <li>• Check application status</li>\n                    <li>• Learn about benefits</li>\n                    <li>• Find nearest office</li>\n                  </ul>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className={`flex-1 flex flex-col h-full ${showSidebar ? \"ml-64\" : \"ml-0\"}`}>\n        {/* Header */}\n        <header className=\"bg-white border-b border-gray-200 p-4 flex items-center justify-between shadow-sm shrink-0\">\n          <Button variant=\"ghost\" size=\"sm\" onClick={() => setShowSidebar(!showSidebar)} className=\"md:hidden\">\n            <Menu className=\"h-5 w-5\" />\n          </Button>\n          \n          <div className=\"w-8\"></div>\n        </header>\n\n        {/* Scrollable Chat Messages Area */}\n        <div className=\"flex-1 overflow-y-auto\">\n          <div\n            className={`flex flex-col px-4 md:px-6 bg-white pt-6 pb-8\n            ${showWelcomeMessage ? \"items-center justify-center\" : \"items-stretch justify-start\"}`}\n          >\n            {/* Welcome Message Section */}\n            {showWelcomeMessage && (\n              <div className=\"text-center p-8\">\n                <div className=\"space-y-4 mt-4\">\n                  <div className=\"mx-auto p-2 bg-gradient-to-br from-orange-100 to-green-100 rounded-full border-2 border-orange-200 shadow-lg w-28 h-28 flex items-center justify-center\">\n                    <Image\n                      src=\"/pmay-logo-removebg-preview.png\"\n                      alt=\"Government of India Emblem\"\n                      width={95}\n                      height={95}\n                      className=\"object-contain\"\n                    />\n                  </div>\n                  \n                  <h3 className=\"text-3xl font-bold text-blue-800\">PMAY Chatbot</h3>\n                  <p className=\"text-lg text-gray-600 max-w-md mx-auto\">\n                    Ask questions about the Pradhan Mantri Awas Yojana (PMAY) scheme and get accurate,\n                    context-aware responses.\n                  </p>\n                  <div className=\"flex items-center justify-center mt-3\">\n                    <Info className=\"h-4 w-4 text-blue-600 mr-2\" />\n                    <span className=\"text-sm text-blue-600\">Powered by RAG with cross-encoder re-ranking</span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Initial Loading Spinner */}\n            {isLoading && messages.length === 0 && (\n              <div className=\"flex-1 flex items-center justify-center\">\n                <Loader2 className=\"h-12 w-12 text-blue-600 animate-spin\" />\n              </div>\n            )}\n\n            {/* Error Message */}\n            {error && (\n              <div className=\"flex-1 flex items-center justify-center text-center p-8\">\n                <div className=\"space-y-3 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\n                  <svg\n                    className=\"h-12 w-12 mx-auto text-red-500\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.1-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                    />\n                  </svg>\n                  <h3 className=\"text-xl font-semibold\">Oops! Something went wrong.</h3>\n                  <p className=\"text-sm\">{error.message || \"Please try again later.\"}</p>\n                  <Button onClick={() => window.location.reload()} variant=\"destructive\" size=\"sm\">\n                    Refresh\n                  </Button>\n                </div>\n              </div>\n            )}\n\n            {/* Messages List */}\n            {messages.length > 0 && (\n              <div className=\"space-y-6 w-full\">\n                {messages.map((message) => (\n                  <div\n                    key={message.id}\n                    className={`flex items-start gap-3 ${message.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n                  >\n                    {message.role === \"assistant\" && (\n                      <Avatar className=\"h-10 w-10 border border-gray-200 shadow-md\">\n                        <div className=\"rounded-full w-full h-full bg-white flex items-center justify-center\">\n                          <Image\n                            src=\"/bot-avatar.png\"\n                            alt=\"bot-avatar\"\n                            width={30}\n                            height={30}\n                            className=\"rounded-full\"\n                          />\n                        </div>\n                      </Avatar>\n                    )}\n                    <div\n                      className={`relative w-fit overflow-hidden max-w-[80%] rounded-lg px-4 pb-2 pt-3 ${message.role === \"user\" ? \"bg-blue-500 text-white\" : \"bg-gray-100 text-gray-800\"}`}\n                    >\n                      <div className=\"prose prose-sm leading-normal text-gray-900 break-words\">\n                        <ReactMarkdown remarkPlugins={[remarkGfm]}>{message.content}</ReactMarkdown>\n                      </div>\n                      {message.sources && message.sources.length > 0 && message.role !== \"user\" && (\n                        <SourceDocuments documents={message.sources} />\n                      )}\n                    </div>\n                    {message.role === \"user\" && (\n                      <Avatar className=\"h-10 w-10 border border-gray-200 shadow-md\">\n                        <AvatarFallback className=\"bg-gray-300 text-gray-800 text-xs\">You</AvatarFallback>\n                      </Avatar>\n                    )}\n                  </div>\n                ))}\n                <div ref={messagesEndRef} />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Input Area (fixed at bottom) */}\n        <div className=\"border-t border-gray-200 p-4 bg-gray-50 shrink-0\">\n          <form onSubmit={handleSubmit} className=\"flex w-full items-center gap-3\">\n            <Input\n              placeholder=\"Ask about PMAY scheme...\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              className=\"flex-1 bg-white border-gray-300 focus-visible:ring-2 focus-visible:ring-blue-600 focus-visible:ring-offset-2 text-gray-900 placeholder:text-gray-500 rounded-lg py-3 px-4\"\n              disabled={isLoading}\n              aria-label=\"Chat input\"\n            />\n            <Button\n              type=\"submit\"\n              size=\"lg\"\n              className=\"bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-5 py-3 shadow-md hover:shadow-lg transition-all duration-200 transform hover:-translate-y-0.5 disabled:bg-blue-400 disabled:transform-none disabled:shadow-none\"\n              disabled={isLoading || !input.trim()}\n              aria-label=\"Send message\"\n            >\n              {isLoading ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <Send className=\"h-5 w-5\" />}\n            </Button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}